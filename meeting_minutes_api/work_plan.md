# 議事録生成システム作業計画書

## 概要
朝の進捗報告会のトランスクリプトから議事録を自動生成するFastAPIシステムの実装

## 要件分析

### 機能要件
- **単一エンドポイント**: 1つのAPIエンドポイントのみで完結
- **AI処理**: OpenAI GPT-4を使用したトランスクリプト解析
- **日本語フォーマット**: 指定された形式での議事録出力
- **ユーザー入力**: タイトルからファシリティまでの全項目が入力可能
- **テキスト出力**: 構造化されたテキスト形式での議事録返却

### 技術要件
- **FastAPI**: デフォルトWebUI（Swagger）使用
- **Pydantic**: データ検証とモデル定義
- **OpenAI SDK**: AI処理用
- **Python 3.12+**: 実行環境

## システム設計

### アーキテクチャ
```
Client Request → FastAPI Endpoint → TranscriptProcessor → MeetingMinutesFormatter → Text Response
```

### データフロー
1. **入力**: ユーザーがヘッダー情報とトランスクリプトを送信
2. **AI処理**: OpenAI GPT-4でトランスクリプトを構造化データに変換
3. **フォーマット**: 構造化データを指定された日本語形式に変換
4. **出力**: テキスト形式の議事録を返却

## 実装計画

### Phase 1: データモデル設計
- **MeetingHeader**: 会議メタデータ（タイトル、日時、場所、参加者、欠席者、ファシリティ）
- **TranscriptRequest**: API入力データ（ヘッダー + トランスクリプト）
- **PersonGoal**: 個人目標データ
- **PersonProgress**: 進捗・問題データ
- **PersonSolution**: 解決策データ

### Phase 2: AI処理クラス実装
**TranscriptProcessor クラス**
- OpenAI APIクライアント初期化
- システムプロンプト定義（日本語指示）
- トランスクリプト処理プロンプト生成
- AI応答のJSON解析
- エラーハンドリング

**主要メソッド:**
- `__init__()`: OpenAIクライアント初期化
- `process_transcript()`: メイン処理メソッド
- `_get_system_prompt()`: システムプロンプト取得
- `_create_processing_prompt()`: 処理プロンプト生成
- `_parse_ai_response()`: AI応答解析

### Phase 3: フォーマッタークラス実装
**MeetingMinutesFormatter クラス**
- 日本語議事録フォーマット生成
- 全角スペースによる正確なインデント
- アジェンダの目次形式配置

**出力フォーマット:**
```
タイトル：[タイトル]
日時：[日時]
場所：[場所]
参加者：[参加者リスト]
欠席者：[欠席者リスト]
ファシリティ：[司会者]

アジェンダ
本日の業務目標
現在の進捗と問題点
問題解決方法
次回進捗報告内容

・本日の業務目標
　[名前1]
　[目標内容]
　[名前2]
　[目標内容]

・現在の進捗と問題点
　・[名前1]
　　　前日の達成度：[x]%
　　　進捗状況：[進捗内容]
　　　問題点：[問題内容]

・問題解決方法
　・[名前1]
　　[解決策内容]

次回進捗報告内容
　①先日業務目標について
　②進捗、課題報告
　③課題に対する解決策
```

### Phase 4: API エンドポイント実装
**単一エンドポイント: POST /generate-minutes**
- 入力: TranscriptRequest（ヘッダー + トランスクリプト）
- 処理: AI解析 → フォーマット変換
- 出力: テキスト形式の議事録

**エンドポイント仕様:**
```python
@app.post("/generate-minutes")
async def generate_minutes(request: TranscriptRequest):
    # 1. AI処理でトランスクリプトを構造化
    # 2. 構造化データを日本語フォーマットに変換
    # 3. テキスト形式で返却
    return {"formatted_minutes": text_output}
```

### Phase 5: 設定・環境
- **pyproject.toml**: 依存関係管理
- **.env**: OpenAI APIキー設定
- **README.md**: ドキュメント更新

## テスト計画

### 単体テスト
- TranscriptProcessor各メソッドのテスト
- MeetingMinutesFormatterのフォーマット検証
- エラーハンドリングのテスト

### 統合テスト
- エンドポイント全体のワークフローテスト
- 様々なトランスクリプト入力でのテスト
- 日本語フォーマット出力の検証

### 手動テスト
- Swagger UIでのエンドポイントテスト
- 実際のトランスクリプトデータでのテスト
- エラーケースの確認

## リスク・課題

### 技術リスク
- **OpenAI API制限**: レート制限、コスト
- **AI応答品質**: JSON形式の不整合
- **日本語処理**: 文字化け、フォーマット崩れ

### 対策
- **エラーハンドリング**: 堅牢な例外処理
- **レスポンス検証**: JSON解析の厳密なチェック
- **フォールバック**: AI失敗時の代替処理

## 成果物

### コードファイル
- `app/main.py`: メインアプリケーション
- `pyproject.toml`: 依存関係定義
- `.env`: 環境変数設定

### ドキュメント
- `README.md`: システム概要・使用方法
- `work_plan.md`: 本作業計画書

## スケジュール

1. **データモデル実装** (30分)
2. **TranscriptProcessor実装** (45分)
3. **MeetingMinutesFormatter実装** (30分)
4. **APIエンドポイント統合** (15分)
5. **テスト・検証** (30分)
6. **ドキュメント更新** (15分)

**合計予定時間**: 約2.5時間

## 品質基準

### コード品質
- Pythonコーディング規約準拠
- 適切なエラーハンドリング
- 型ヒント使用

### 出力品質
- 指定フォーマットとの完全一致
- 日本語文字の正確な処理
- インデントの正確性

### API品質
- 適切なHTTPステータスコード
- 明確なエラーメッセージ
- Swagger UIでの使いやすさ

## 完了基準

- [ ] 単一エンドポイントの実装完了
- [ ] AI処理の正常動作確認
- [ ] 日本語フォーマット出力の検証
- [ ] Swagger UIでのテスト成功
- [ ] エラーハンドリングの動作確認
- [ ] ドキュメント更新完了
- [ ] PR作成・レビュー準備完了
